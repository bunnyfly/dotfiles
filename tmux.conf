####################################################################################################
# Tmux Configuration by Chloe Adeline
#
# A Vim-like Tmux experience! I use the Colemak keyboard layout; places where my own Colemak-Vim
# bindings are used mention "Colemak" in the comments. [I use HNEI arrows instead of HJKL, K instead
# of N for searching, etc.]
####################################################################################################


####################################################################################################
# GENERAL OPTIONS
####################################################################################################
set -g history-limit 10000
set -g default-terminal "screen-256color"
set -g escape-time 0 
set -g default-path "~"
set -g base-index 1  # Start window numbering at 1.

# Vi-Mode!
set -g status-keys vi
setw -g mode-keys vi

# Powerline status bar. Only sources if file exists.
if-shell "test -f /usr/local/google/home/chloeadeline/.vim/bundle/powerline/powerline/bindings/tmux/powerline.conf" \
    "source '/usr/local/google/home/chloeadeline/.vim/bundle/powerline/powerline/bindings/tmux/powerline.conf'"
if-shell "test -f /Users/Bunnyfly/dotfiles/vim/bundle/powerline/powerline/bindings/tmux/powerline.conf" \
    "source '/Users/Bunnyfly/dotfiles/vim/bundle/powerline/powerline/bindings/tmux/powerline.conf'"


####################################################################################################
# KEY BINDINGS - GENERAL
####################################################################################################

# Ctrl-A prefix.
set -g prefix C-a
set -g prefix2 C-A

# ; command prompt.
bind-key \; command-prompt

# Misc
bind-key p paste-buffer
bind-key R source-file ~/.tmux.conf \; refresh-client


####################################################################################################
# KEY BINDINGS - SESSIONS
####################################################################################################

# Last/previous/next session. [Colemak]
bind-key a switch-client -l
bind-key h switch-client -p
bind-key i switch-client -n

bind-key o command-prompt -p 'New Session Name:'  'new -s %%'
bind-key < command-prompt -p 'Rename Session:' 'rename-session %%'
bind-key Enter choose-session


####################################################################################################
# KEY BINDINGS - WINDOWS
####################################################################################################

# Last/previous/next window. [Colemak]
bind-key C-a last-window
bind-key C-h previous-window
bind-key C-i next-window

bind-key , command-prompt -p 'Rename Window:' 'rename-window %%'
bind-key c new-window
bind-key C set default-path "" \; new-window \; set default-path "~"


####################################################################################################
# KEY BINDINGS - PANES
####################################################################################################

# Last/select pane. [Colemak]
bind-key A last-pane
bind-key H select-pane -L
bind-key N select-pane -D
bind-key E select-pane -U
bind-key I select-pane -R

# More Vim-like quit.
bind-key q confirm-before -p "Quit pane #P? (y/n)" kill-pane

# Resize panes with arrows.
bind-key Left resize-pane -L 10
bind-key Down resize-pane -D 10
bind-key Up resize-pane -U 10
bind-key Right resize-pane -R 10

# Split panes.
bind-key s split-window -h
bind-key S split-window

#??? bind-key r rotate-window


####################################################################################################
# KEY BINDINGS - VI-COPY MODE
####################################################################################################

# More Vim-like
bind-key Space copy-mode
bind-key -t vi-copy v begin-selection
bind-key -t vi-copy c-v rectangle-toggle
bind-key -t vi-copy y copy-selection

# Colemak Keys
bind-key -t vi-copy n cursor-down
bind-key -t vi-copy e cursor-up
bind-key -t vi-copy i cursor-right
bind-key -t vi-copy k search-again
bind-key -t vi-copy K search-reverse
bind-key -t vi-copy l start-of-line
bind-key -t vi-copy L end-of-line
bind-key -t vi-copy j next-word-end
bind-key -t vi-copy J next-space-end
bind-key -t vi-copy c-n bottom-line
bind-key -t vi-copy c-m middle-line
bind-key -t vi-copy c-e top-line


####################################################################################################
# KEY BINDINGS - VI-CHOICE MODE
####################################################################################################

# Colemak
bind-key -t vi-choice n down
bind-key -t vi-choice e up
#bind-key -t vi-choice h tree-collapse
#bind-key -t vi-choice i tree-expand

bind-key -t vi-choice o choose


####################################################################################################
# KEY BINDINGS - VI-EDIT MODE
####################################################################################################

# Colemak
bind-key -ct vi-edit n history-down
bind-key -ct vi-edit e history-up
bind-key -ct vi-edit s switch-mode
#bind-key -ct vi-edit S switch-mode-begin-line
bind-key -ct vi-edit l start-of-line
bind-key -ct vi-edit L end-of-line
bind-key -ct vi-edit j next-word-end
bind-key -ct vi-edit J next-space-end


####################################################################################################
# CLEANUP
####################################################################################################

unbind-key Tab
unbind-key M-Up
unbind-key M-Down
unbind-key M-Left
unbind-key M-Right
unbind-key C-Up
unbind-key C-Down
unbind-key C-Left
unbind-key C-Right
unbind-key C-b
unbind-key C-o
unbind-key C-z
unbind-key !
unbind-key '"'
unbind-key '#'
unbind-key '$'
unbind-key %
unbind-key &
unbind-key "'"
unbind-key (
unbind-key )
unbind-key -
unbind-key .
unbind-key :
unbind-key =
unbind-key D
unbind-key L
unbind-key [
unbind-key ]
unbind-key f
unbind-key l
unbind-key n
unbind-key t
unbind-key w
unbind-key x
unbind-key {
unbind-key }
unbind-key PPage
unbind-key M-n
unbind-key M-o
unbind-key M-p
